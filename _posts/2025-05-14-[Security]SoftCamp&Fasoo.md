---
title: "Consideration of Using Multi DRM Library in Service"
excerpt: "[Security] Consideration of Using Softcamp, Fasoo in Service"

categories:
  - Blog
tags:
  - [Blog, jekyll, Github]
last_modified_at: 2025-05-14
---


### λ“¤μ–΄κ°€λ©΄μ„
  - β… Issue
    -  DRM(Digital Rights Management) : λ””μ§€ν„Έ μ½ν…μΈ μ μ €μ‘κ¶ κ΄€λ¦¬λ¥Ό μ„ν• κΈ°μ λ΅ λ€ν‘μ μΈ μ†”λ£¨μ…μΌλ΅ SoftCamp, Fasoo, MarkAnyκ°€ μμµλ‹λ‹¤
    - ν„μ¬ μ„λΉ„μ¤μ—μ„λ” SoftCamp DRMμ„ μ‚¬μ© μ¤‘μ…λ‹λ‹¤. νΉμ • μ§€μ‚¬μ—μ„λ” Fasoo DRMμΌλ΅ λ¬Έμ„λ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤. ν•΄λ‹Ή μ§€μ‚¬μ—μ„ μ„λΉ„μ¤λ¥Ό μ΄μ©ν•λ ¤κ³  ν•  λ• ν•­μƒ μ„λΉ„μ¤μ—μ„λ” SoftCamp DRMμ΄ μ•”νΈν™” λμ–΄μλ” μƒνƒλ΅ λ¬Έμ„κ°€ μ΅΄μ¬ν•΄μ•Ό ν•©λ‹λ‹¤
    - μ„λΉ„μ¤ λ‚΄μ— νμΌμ„ μ—…λ΅λ“ : Fasoo λ³µνΈν™” -> SoftCamp μ•”νΈν™” -> μ„λ²„μ— μ €μ¥
    - μ„λΉ„μ¤ λ‚΄μ— νμΌμ„ λ‹¤μ΄λ΅λ“ : SoftCamp λ³µνΈν™” -> Fasoo μ•”νΈν™” -> Clientμ— μ €μ¥

    - λ³΄ν†µ ν• κ°€μ§€μ DRMμ„ μ‚¬μ©ν•μ§€λ§ λ‘ κ°€μ§€ DRMμ„ μ‚¬μ©ν•λ” Referenceλ‚ μ‚¬λ΅€κ°€ μ΅΄μ¬ν•μ§€ μ•μ
  - β οΈ Consideration 
    - ν• κ°μ WASμ—μ„μ λ‘ κ°μ DRMμ„ ν†µν• μ•”/λ³µνΈν™”
    - λ‘ κ°μ WASλ΅ λ¶„λ¦¬ λ° API ν†µμ‹ μ„ ν†µν• DRM μ•”/λ³µνΈν™”

<br />

---

- ### Fasoo, SoftCampμ κ³µμ΅΄μ λ¬Έμ μ 

  - #### β Critical Problem
    - Fasoo λ³µνΈν™” νμΌμ— SoftCamp DRM μ•”νΈν™” μ μ© β†’ ν¬λ§· μ΄μ
      - Fasoo λ³µνΈν™” μ‹ μΌλ° νμΌλ΅ λμ•„μ¤κΈ΄ ν•μ§€λ§ μΌμ‹μ μΈ λ©”νƒ€λ°μ΄ν„°/μ†μ„±μ΄ λ‚¨μ•„μμ„ μ μμ–΄ SoftCamp μ•”νΈν™”ν•  λ• μ¶©λμ΄λ‚ νμΌ νκ΄΄ κ°€λ¥μ„± μ΅΄μ¬
    - SoftCamp λ³µνΈν™” νμΌμ— Fasoo DRM μ•”νΈν™” μ μ© β†’ μ¤‘λ³µ λ³΄νΈ, μ •μ±… κΌ¬μ„
      - SoftCampλ” νμΌμ„ **μλ™ μ—΄λ μ μ–΄, νμΌ μ¶”μ ** κΈ°λ¥ ν¬ν•¨ 
      - λ³µνΈν™” ν›„ Fasoo μ•”νΈν™”λ¥Ό μ§„ν–‰ν•λ©΄ Fasooλ” SoftCamp λ³΄νΈ ν”μ μ„ μ΄ν•΄ν•μ§€ λ»ν•λ―€λ΅ μ •μ±… μ¶©λ, λ³΄μ• μ •μ±… λ¬΄λ ¥ν™” κ°€λ¥μ„± μμ

  - #### β οΈ Potential Problem

    - #### DRMμ€ λ©”λ¨λ¦¬μ™€ μ‹μ¤ν… μμ›μ„ κΉκ² κ±΄λ“λ¦¬λ” λ³΄μ• λ¨λ“
      - Fasoo : Java + μΈμ¦μ„ + Native κΈ°λ°
      - SoftCamp : μ‹μ¤ν… μ„λΉ„μ¤ + KeyManager + λΌμ΄λΈλ¬λ¦¬ κΈ°λ°
      - JVMμ΄λ‚ OS μμ¤€μ μμ›μ— μ ‘κ·Όν•λ―€λ΅  μμ› μ¶©λ μ„ν—μ„± μ΅΄μ¬

    - #### μ •μ±… μ¶©λ
      - SoftCamp, Fasooλ” λ¨λ‘ μμ²΄ μ •μ±… μ„λ²„λ¥Ό μ΄μ
      - ν• νμΌμ— λ€ν•΄ SoftCampλ” μ—΄λ ν—μ©, Fasoo μ°¨λ‹¨ μ„¤μ •μ„ ν•λ©΄ νΉμ • νμΌμ— λ€ν• μ •μ±… μ°μ„ μμ„μ λ¨μ λ°μƒ

    - #### μ„±λ¥ μ €ν•
      - SoftCamp, Fasoo DRMμ΄ λ™μ‹μ— νμΌ/λ©”λ¨λ¦¬λ¥Ό κ²€μ‚¬ν•λ©΄ μ„λ²„ I/Oκ°€ λλ ¤μ§€λ©° μ¥μ•  λ°μƒμ μ›μΈ νμ•…μ΄ μ–΄λ ¤μ›€

    
<br />

---


- ### κ°™μ€ WAS instanceμ Port λ¶„λ¦¬

  - μ„μ Fasoo, SoftCamp κ³µμ΅΄ λ¬Έμ μ κ³Ό λ™μΌ(Portλ§ λ¶„λ¦¬ν•΄μ„ ν•΄κ²°λλ” λ¶€λ¶„μ΄ μ—†μ)

  - #### β Problem
    - Tomcat κ°™μ€ WASμ—μ„ Portλ¥Ό λ‹¤λ¥΄κ² μ„¤μ •ν•λ” κ²ƒμ€ λ‹¨μ§€ Server Socket μ”μ²­μ„ μ–΄λ””μ„ λ°›μ„μ§€λ¥Ό μ„¤μ •ν• κ²ƒμ΄λ‹¤
    - λ‹¤λ¥Έ Portλ¥Ό μ‚¬μ©ν•λ”λΌλ„ κ²°κµ­ ν•λ‚μ JVMμ•μ—μ„ λμ•„κ°€λ” λ™μΌν• WAS instance
    - JVMμ ClassLoader, Memory, Native Libraryλ¥Ό κ³µμ 

  - #### β οΈ Potential Problem
    - ClassLoader μ¶©λ
      - SoftCamp, Fasoo λ¨λ‘ native library λ° java class(jar, ll, so)λ¥Ό μ‚¬μ© -> JVM λ΅λ”©μ—μ„ μ¶©λ
    - Native Libraryλ” JVM λ‚΄ μ¤‘λ³µ λ΅λ”© λ¶κ°€ -> ν•λ‚μ WASμ—μ„ λ‘ DRMμ΄ λ™μ‹μ— λ΅λ”©ν•λ ¤λ” κ²½μ° μ¶©λ
    - μΈμ¦μ„ κ²½ν•©
      - SoftCamp : System κΈ°λ°
      - Fasoo : Java μΈμ¦μ„ κΈ°λ°
      - λ‘ λ‹¤ νμΌ κΈ°λ° μΈμ¦μ„ κ²½λ΅λ¥Ό μ°Έμ΅°(μ†μ„± μ¶©λ, κ²½λ΅ μ¶©λ λ°μƒ κ°€λ¥)
    - Native Library Load μ¤‘λ³µ
      - JVMμ€ λ™μΌν• .dll, .soλ¥Ό λ‘ λ² loadν•λ ¤κ³  ν•λ©΄ UnsatisfiedLinkError, LinkageError λ“±μ μΉλ…μ μΈ μ¤λ¥ λ°μƒ κ°€λ¥
    - λ¦¬μ†μ¤ κ²½ν•©
      - μ•”λ³µνΈν™” μ‹ CPU/λ©”λ¨λ¦¬ μ‚¬μ©λ¥ μ΄ λ†’μ€ μ‘μ—… -> λ™μΌ JVMμ—μ„ μ²λ¦¬ν•  κ²½μ° μ„±λ¥ ν•λ½
    - μ¥μ•  μ›μΈ μ¶”μ μ΄ λ¶κ°€λ¥
      - μ¤λ¥ λ°μƒ μ‹ Fasoo, SoftCamp μ–΄λ μ½μ—μ„μ μ¥μ• μΈμ§€ λ¶„μ„ λ¶κ°€λ¥
      - λ³΄μ• λ΅κ·Έ νμΌμ΄ μ„μΌ κ°€λ¥μ„± λ° λ³µκµ¬ λ¶κ°€λ¥λ¥

  - κ°€λ¥ν•λ©΄ DRM μ „μ© μ„λ²„λ¥Ό λ¶„λ¦¬ν•λ” κ²ƒμ΄ μΆ‹μ
  
  - #### β… Solution(μ„λ΅ λ‹¤λ¥Έ WASλ΅μ λ¶„λ¦¬)
    - μμ› μ¶©λ λ°©μ§€ : κ° DRMμ€ λ‹¤λ¥Έ JVMμ—μ„ λμ•„κ°€λ―€λ΅ λ¦¬μ†μ¤, μΈμ¦μ„, ν‚¤ μ¶©λ μ—†μ
    - μ„λΉ„μ¤ μ•μ •μ„± ν™•λ³΄ : ν• μ½ DRMλ§ μ¥μ•  λ°μƒν•΄λ„ μ „μ²΄ μ„λΉ„μ¤ μ¤‘λ‹¨ μ—†μ, ν•μ½ DRMλ§ μ—…κ·Έλ μ΄λ“ν•κ±°λ‚ ν¨μΉ κ°€λ¥
    - λ³΄μ• κ°•ν™”	: κ° DRMμ— λ§λ” κ¶ν•, λ„¤νΈμ›ν¬ μ •μ±… λ¶„λ¦¬ κ°€λ¥
    - μ¥μ•  λ¶„μ„ κ°„κ²° : λ΅κ·Έ, μμ™Έ, μ¤λ¥λ¥Ό DRMλ³„λ΅ λ…ν™•ν κµ¬λ¶„ κ°€λ¥

    
<br />

---

- ### λ‹¤λ¥Έ WAS instanceλ΅μ λ¶„λ¦¬

  - λ™μΌ JVMμ— λ‘ κ°μ DRMμ΄ κ³µμ΅΄ν•  λ•μ λ¬Έμ μ λ“¤μ€ λ‹¤ ν•΄κ²° κ°€λ¥

  - #### Architecture
    - WAS Instance A(SoftCamp μ „μ©) β€“ JVM λ‚΄μ—λ” SoftCamp λΌμ΄λΈλ¬λ¦¬μ™€ μ„¤μ •λ§ μ΅΄μ¬
    - WAS Instance B(Fasoo μ „μ©) -	JVM λ‚΄μ—λ” Fasoo jar λ° μΈμ¦μ„λ§ μ΅΄μ¬
    - π” μ„λ΅λ” API νΈμ¶λ΅ μ—°κ³„	ν‰λ¬Έ νμΌμ„ μ„μ‹ μ €μ¥ν•κ±°λ‚ REST API μ—°λ™(RestTemplate, WebClient)

  - #### Flowchart

    - Upload
      Client (.fasoo) β†’ Aμ„λ²„
      β†’ Aμ„λ²„κ°€ Bμ„λ²„λ΅ λ³µνΈν™” μ”μ²­ (Fasoo ν•΄μ )
      β†’ Aμ„λ²„μ—μ„ SoftCamp μ•”νΈν™”
      β†’ μ €μ¥ (.scenc)

    - Download
      Client μ”μ²­ β†’ Aμ„λ²„
      β†’ SoftCamp λ³µνΈν™”
      β†’ Bμ„λ²„λ΅ μ•”νΈν™” μ”μ²­ (Fasoo μ μ©)
      β†’ Client μ „λ‹¬ (.fasoo)


  - #### Consideration
    - νμΌ μ—°κ³„ μ²λ¦¬ : μ¤‘κ°„ ν‰λ¬Έ μ²λ¦¬ μ„μΉ(Fasoo β†’ SoftCamp μ•”λ³µνΈν™” μ‚¬μ΄μ νμΌμ€ μ„μ‹ μ €μ¥μ†λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•¨)
    - μ„μ‹ νμΌ λ³΄μ• : ν‰λ¬Έ νμΌ μ €μ¥μ†	μ¤‘κ°„ ν‰λ¬Έ νμΌμ€ λ””μ¤ν¬λ‚ λ©”λ¨λ¦¬μƒμ— μ•”νΈν™”λ μƒνƒλ΅ μ μ§€ ν•„μ”(λ³΄μ• μ„ν— λ°μƒ κ°€λ¥)
    - μ²λ¦¬ μμ„ λ³΄μ¥ : μ•”/λ³µνΈν™” μ²λ¦¬ μμ„ λ΅μ§ μƒ Fasoo β†’ SoftCamp νΉμ€ λ°λ€λ΅ μ •ν™•ν μμ„ κ΄€λ¦¬ν•΄μ•Ό λ¬Έμ  μ—†μ


  - #### β οΈ μ„ν—μ„±κ³Ό λ¶ν™•μ‹¤μ„±
    - μ¤‘κ°„ ν‰λ¬Έ νμΌ μ μ¶ κ°€λ¥μ„± μ¦κ°€
      - Fasoo λ³µνΈν™” β†” SoftCamp μ•”νΈν™” μ‚¬μ΄ κµ¬κ°„μ— νμΌμ€ λ°λ“μ‹ ν• λ² ν‰λ¬Έ μƒνƒλ΅ μ΅΄μ¬ν•λ‹¤
      - νμΌ μ μ¶ μ‹ μ›λ¬Έ λ…Έμ¶	λ„¤νΈμ›ν¬ μ „μ†΅ μ¤‘ κ°€λ΅μ±„κ±°λ‚ μ„μ‹ μ €μ¥μ†κ°€ μ μ¶λλ©΄ ν‰λ¬Έ μ μ¶ κ°€λ¥
      - κΈ°μ΅΄μ— DRMμ„ ν•λ‚λ§ μ‚¬μ©ν–μ„ κ²½μ°μ° μ•”νΈν™” νμΌλ§ μ²λ¦¬ β†’ ν‰λ¬Έμ΄ μ™Έλ¶€ λ…Έμ¶λ  μΌμ΄ μ—†μ—μ
    
      - π’΅ DRM μ‹μ¤ν…μ€ "ν‰λ¬Έ λ…Έμ¶ μ—†μ΄ μ²λ¦¬"κ°€ ν•µμ‹¬μΈλ° Fasooμ™€ SoftCampλ¥Ό λ³‘ν–‰ν•  κ²½μ° λ°λ“μ‹ ν‰λ¬Έ μƒνƒλ΅ μ²λ¦¬ν•λ” κµ¬κ°„μ΄ μƒκΈ°λ©° μ΄λ” DRM λ³Έμ§κ³Ό μ¶©λ
    
    - λ³µμ΅ν• μ‹μ¤ν… μ•„ν‚¤ν…μ² β†’ μ¥μ•  κ°€λ¥μ„± μ¦κ°€

      - λ‘ κ°μ WAS, DRM Library β†’	μ‹μ¤ν… λ³µμ΅λ„κ°€ μ¦κ°€
      - μ•”/λ³µνΈν™” μ‘μ—…μ— μ„λ²„ κ°„μ API ν†µμ‹ μ΄ μ΅΄μ¬ν•΄μ„ ν†µμ‹  μ‹¤ν¨, νƒ€μ„μ•„μ›ƒ, μΈμ¦ μ¤λ¥ λ“± λ„¤νΈμ›ν¬ μ΄μλ΅ μΈν• DRM μ²λ¦¬ μ‹¤ν¨ κ°€λ¥μ„± μ΅΄μ¬
      - νΈλμ­μ… μ²λ¦¬ μ—†μ : μ•”νΈν™” 1λ‹¨κ³„ μ„±κ³µ ν›„ 2λ‹¨κ³„ μ‹¤ν¨ν•λ©΄ λ¶μ™„μ „ν• νμΌμ΄ μ €μ¥λκ±°λ‚ μ μ¶λ  κ°€λ¥μ„±

      - π’΅μ‹μ¤ν…μ΄ λ³µμ΅ν•΄μ§μλ΅ νΈλ¬λΈ”μν… μ‹κ°„ μ¦κ°€ + μ¥μ•  μ›μΈ μ¶”μ  μ–΄λ ¤μ›€ β†’ μ΄μ μ„ν— μ¦κ°€
    
    - DRM κ°„ ν—¤λ” μ¶©λ λ° ν¬λ§· λΉ„νΈν™ μ΄μ
      - Fasoo β†’ SoftCamp μμ„	DRM ν—¤λ” κµ¬μ΅°κ°€ λ‹¤λ¥΄λ―€λ΅ νμΌ κµ¬μ΅°κ°€ κΌ¬μΌ κ°€λ¥μ„± μμ
      - DRM μ¤‘λ³µ μ μ© λ°©μ§€ ν•„μ”	: μ΄λ―Έ DRMμ΄ μ μ©λ νμΌμ— λ‹¤μ‹ DRM μ μ© μ‹ λ³µνΈν™” λ¶κ°€λ¥ν• μƒνƒ λ°μƒ κ°€λ¥
      - π’΅ SoftCampμ™€ Fasooλ” κ°κ°μ νμΌ ν¬λ§· μ •μκ°€ λ‹¤λ¦„ β†’ λ§μ•½ μλ»λ μμ„λ΅ μ μ© μ‹ λ³µκµ¬ λ¶κ°€λ¥ν• νμΌμ΄ μƒμ„±λ  μ μμ
    
    - DRMμ λ²„μ „ κ΄€λ¦¬ λ° μ—…λ°μ΄νΈνΈ
      - μ—…λ°μ΄νΈ λ¶μΌμΉ :	Fasooμ™€ SoftCampμ λ²„μ „ μ—…κ·Έλ μ΄λ“ νƒ€μ΄λ°μ΄ λ‹¤λ¥΄λ©΄ μμƒμΉ λ»ν• μ¶©λ λ°μƒ κ°€λ¥μ„± μ΅΄μ¬
      - π’΅ λ³µμ DRMμ„ μ‚¬μ©ν•  κ²½μ° κ°€μ¥ ν° λ¦¬μ¤ν¬λ” ν•μ½ λΌμ΄λΈλ¬λ¦¬ μ—…λ°μ΄νΈ μ‹ λ‹¤λ¥Έ μ½μ΄ κΉ¨μ§€λ” κ²½μ°
    
    - μ†λ„ μ €ν• λ° μ¤λ¥ μ²λ¦¬
      - μ—…λ΅λ“/λ‹¤μ΄λ΅λ“ μ‹ μ¤‘κ°„ API ν†µμ‹  μ¶”κ°€ λ° μ μ°¨ μ¶”κ°€λ΅ κΈ°μ΅΄ λ°©μ‹λ³΄λ‹¤ μ†λ„ μ €ν• λ°μƒ
      - π’΅ μ‚¬μ©μ μ…μ¥μ—μ„λ” λ¬Έμ„ μ—…λ΅λ“/λ‹¤μ΄λ΅λ“κ°€ κΈ°μ΅΄λ³΄λ‹¤ μ²λ¦¬ μ†λ„κ°€ λλ¦¬κ² λκ»΄μ§ μ μμΌλ©° νμΌ μ¶©λ λ°μƒ μ‹ νμΌ μμ²΄κ°€ κΉ¨μ§„ κ²ƒμ²λΌ λκ»΄μ§„λ‹¤


    
<br />

---



- ### β…Conclusion
  - λ³µνΈν™” ν›„ μ¬μ•”νΈν™”λ” μ΄λ΅ μƒμΌλ΅λ” κ°€λ¥ν•μ§€λ§ ν•΄λ‹Ή λ°©μ‹μ€ μ‹μ¤ν…ν…μ μ •μƒ λ™μ‘μ„ λ³΄μ¥ν•  μ μ—†κ³  νμΌμ— λ€ν• μ •μƒμ μΈ κ΄€λ¦¬λ¥Ό λ³΄μ¥ν•  μ μ—†λ‹¤
  - μ΄μ κ°€λ¥ν• κµ¬μ΅°μ΄μ§€λ§ λΉ„μ¦λ‹μ¤μƒ λ‘ κ°μ DRMμ„ κΌ­ μ¨μ•Όν•λ” μƒν™©μ΄ μ•„λ‹λΌλ©΄ ν•λ‚μ DRMμΌλ΅ μ‚¬μ©ν•λ” κ²ƒμ„ μ§€ν–¥ν•λ‹¤
  - μ¥κΈ°μ μΌλ΅ λ΄¤μ„ λ• λΌμ΄λΈλ¬λ¦¬ λ²„μ „, μ„λ²„ κ°„ API ν†µμ‹ , μ†λ„ λ¬Έμ , ν‰λ¬Έ νμΌμ΄ μ΅΄μ¬ν•  λ•μ λ³΄μ•, νμΌμ μ‹ λΆ°μ„±μ„ μƒκ°ν–μ„ λ• λ¦¬μ¤ν¬κ°€ μ΅΄μ¬ν•λ” μ•„ν‚¤ν…μ²μ΄λ‹¤